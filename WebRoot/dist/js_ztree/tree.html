<!DOCTYPE html>
<HTML>
<HEAD>
	<TITLE>Test</TITLE>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" href="css/zTreeStyle.css" type="text/css">
	<script type="text/javascript" src="js/jquery-1.4.4.min.js"></script>
	<script type="text/javascript" src="js/jquery.ztree.core-3.5.min.js"></script>
	<script type="text/javascript" src="js/jquery.ztree.excheck-3.5.min.js"></script>
	<SCRIPT type="text/javascript">
		
		<!--
		var serviceTreeObj;
		var provTreeObj;
		var setting = {
			view: {
				selectedMulti: false
			},
			check: {
				enable: true
			},
			data: {
				simpleData: {
					enable: true
				}
			}
		};

		var service =[
		    { id:0, pId:-1, name:"业务权限"},
			{ id:1001, pId:0, name:"首页"},
			{ id:100101, pId:1001, name:"随意勾选 1-1"},
			{ id:100102, pId:1001, name:"随意勾选 1-2"},
			{ id:100103, pId:1001, name:"随意勾选 1-2-1"},
			{ id:100104, pId:1001, name:"随意勾选 1-2-2"},
			{ id:1002, pId:0, name:"系统"},
			{ id:100201, pId:1002, name:"随意勾选 1-1"},
			{ id:100202, pId:1002, name:"随意勾选 1-2"},
			{ id:100203, pId:1002, name:"随意勾选 1-2-1"},
			{ id:100204, pId:1002, name:"随意勾选 1-2-2"}
		];
		var provider = [
		    { id:0, pId:-1, name:"商家权限", open:true},
			{ id:2001, pId:0, name:"基本功能", open:true},
			{ id:2002, pId:2001, name:"随意勾选 1-1"},
			{ id:2003, pId:2001, name:"随意勾选 1-2"},
			{ id:2004, pId:2001, name:"随意勾选 1-2-1"},
			{ id:2005, pId:2001, name:"随意勾选 1-2-2"}
		];
		

		$(document).ready(function(){
			serviceTreeObj = $.fn.zTree.init($("#serviceTree"), setting, service);
			serviceTreeObj.expandAll(true);
			
			provTreeObj = $.fn.zTree.init($("#provTree"), setting, provider);
			provTreeObj.expandAll(true);
		});
		
		function getSelectNodes(treeObj){
		    var nodes=treeObj.getCheckedNodes(true);
            var result="";
			for(var i = 0,len = nodes.length;i<len;i++){
			    if('0'==nodes[i].id){
				    continue;
				}
				result +=nodes[i].id+",";
			}
			return result;
		}
		
		function getSelectValue(){
		    var selectVal = "";
            selectVal += getSelectNodes(serviceTreeObj);
			selectVal += getSelectNodes(provTreeObj);
			alert(selectVal);
		}
		
		//-->
	</SCRIPT>
</HEAD>

<BODY>
<input type="button" value="aaa" onclick="getSelectValue()"/>
<div id="serviceTree" class="ztree"></div>
<div id="provTree" class="ztree"></div>
</BODY>
</HTML>